% !TeX root = ./demo.tex
%% mainframe.sty 2023/02/11 version V0.1  by Sunben Chiu

\NeedsTeXFormat{LaTeX2e}
\ProvidesExplPackage{mainframe}{2023-02-11}{0.1}{Sunben Chiu}

\RequirePackage { tikzpagenodes, atbegshi }

% 参考自 https://tex.stackexchange.com/a/449294
\tl_set:Nn \g__mf_main_frame_tl
  {
    \tikz [ remember~ picture, overlay ]
      \draw
        ( current~ page~ text~ area . south~ west )
        rectangle
        ( current~ page~ text~ area . north~ east ) ;
  }

% 参考自 https://tex.stackexchange.com/a/296862
\tl_new:N \g__mf_frame_tl
\AtBeginShipout { \AtBeginShipoutAddToBox { \g__mf_frame_tl } }


\NewDocumentEnvironment { mfpage } { }
  {
    \cleardoublepage
    \tl_gset_eq:NN \g__mf_frame_tl \g__mf_main_frame_tl
  }
  {
    \cleardoublepage
    \tl_gclear:N \g__mf_frame_tl
  }

\endinput
%%
%% End of file `mainframe.sty'.

